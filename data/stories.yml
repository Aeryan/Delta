# Roboti oodatavad vestlusteede lood
version: "2.0"

stories:

- story: additional assistance deny
  steps:
    - action: utter_offer_additional_help
    - intent: deny
    - action: utter_ok
    - action: utter_bye_2

- story: additional assistance accept
  steps:
    - action: utter_offer_additional_help
    - intent: affirm
    - action: utter_ok
    - action: utter_offer_help

- story: form exit
  steps:
  - intent: exit_form
  - action: action_deactivate_loop
  - active_loop: null
  - action: reset_all_slots
  - action: utter_ok
#  - action: utter_offer_additional_help

# Course event search

- story: respond to course event query
  steps:
    - or:
      - intent: request_course_event_data
      - intent: inform_course
      - intent: inform_course_event
    - action: course_event_query_form
    - active_loop: course_event_query_form
    - active_loop: null
    - action: course_event_data_response

# Employee office search

- story: office search no result
  steps:
  - intent: request_employee_office
  - action: office_search
  - slot_was_set:
    - office_search_result: false
  - action: utter_office_no_office

- story: office search success
  steps:
  - intent: request_employee_office
  - action: office_search
  - slot_was_set:
    - office_search_result: true
  - action: utter_office_result
  - action: check_room_mapping

- story: office guide available
  steps:
  - action: check_room_mapping
  - slot_was_set:
    - room_is_mapped: True
  - action: utter_offer_room_guide

- story: office guide not available
  steps:
  - action: check_room_mapping
  - slot_was_set:
    - room_is_mapped: False
  - action: reset_all_slots

- story: office guide accept
  steps:
  - action: utter_offer_room_guide
  - intent: affirm
  - checkpoint: perform_room_guide

- story: office guide decline
  steps:
  - action: utter_offer_room_guide
  - intent: deny
  - action: utter_ok
  - action: utter_offer_additional_help

#- story: office search name suggestion
#  steps:
#  - action: utter_name_not_found
#  - action: office_employee_suggestion_form
#  - active_loop: office_employee_suggestion_form
#  - active_loop: null
#  - action: office_search_parse_suggestion_reply

# Room guide

- story: room guide no mapping
  steps:
  - intent: request_room_guide
  - action: check_room_mapping
  - slot_was_set:
    - room_is_mapped: False
  - action: utter_room_no_mapping
  - action: reset_all_slots
  - action: utter_offer_additional_help

- story: room guide success
  steps:
  - intent: request_room_guide
  - action: check_room_mapping
  - slot_was_set:
    - room_is_mapped: True
  - checkpoint: perform_room_guide

- story: perform room_guide
  steps:
  - checkpoint: perform_room_guide
  - action: draw_location_map
  - action: utter_there_you_go
  - action: reset_all_slots
